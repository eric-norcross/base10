= form_for @section do |f|
  - if @section.errors.any?
    #error-explanation
      %h1
        = "#{pluralize(@section.errors.count, "error")} prohibited this section from being saved:"
      %ul
        - @section.errors.full_messages.each do |msg|
          %li
            = msg

  %fieldset{id: "section"}
    %legend
      Sub Component

    .field
      = f.label :parent_id, "Parent Section"
      / = f.collection_select(:parent_id, Section.all, :id, :title, :prompt => "Select a Section")
      %select{id: "section_parent_id", name: "section[parent_id]"}
        %option
          Top Level Section
        - Section.where(:parent_id => nil).each do |section_selector|
          = render "section_select", section_selector: section_selector, section: @section, level: -1
    
    .field
      = f.label :skin_id, "Template"
      = f.select :skin_id, Skin.all.collect{|t| [t.title, t.id]}
    
    .field
      = f.label :title
      = f.text_field :title
    
    .field
      /= f.label :content
      = f.cktext_area :content
    
  .actions
    = f.submit 'Save'
