= render "layouts/partials/user_side_nav"

#admin
  %h1 Available Components

  .links
    = link_to 'Add New Component', new_component_path

  - if @components
    %table
      %thead
        %tr
          %th Id
          %th Title
          %th Categories
          %th Main Section
          %th Parent Section
          %th Children
          %th
      %tbody
        - @components.each do |component|
          %tr{class: ("inactive" unless component.active)}
            %td= component.id
            %td= component.title
            %td= component.categories.map{|category| category.title}.join(", ")
            %td= Family.patriarch(@components, component).title
            %td= Family.parent(@components, component).title
            %td= Family.children(@components, component).length
            
            %td.controls
              = link_to 'Show', component
              = link_to 'Edit', edit_component_path(component)
              = link_to 'Destroy', component, method: :delete, data: { confirm: 'Are you sure?' }

  .links
    = link_to 'Add New Component', new_component_path
