- require 'family'

- level = level + 1

- selected = nil
- disabled = nil
- classes = "level#{level}"

- if f.object.parent_id != 0 && f.object.parent_id != nil
  - if f.object.parent_id == collection.id
    - selected = "selected"

- if f.object.id == collection.id
  - disabled = "disabled"

- if level > 0
  - classes += " child"

%option{ value: collection.id, selected: selected, class: classes, disabled: disabled }
  - level.times do 
    \&nbsp;&nbsp;&nbsp;
  = collection.title
- Family.children(@collections, collection).each do |child|
  = render "collections/collection_select", collection: child, level: level, f: f