- unless @message 
  - @message = RetailerRegistration.new

= render "layouts/partials/side_nav", elements: @side_nav_elements

.page.section
  %article
    %header
      %h1
        = @page.title
    #page-body
      = raw @page.content

    .input-form
      = form_for @message, url: messenger_path do |f|
        - if @message.errors.any?
          #error-explanation
            %h1
              = "#{pluralize(@message.errors.count, "error")} prohibited this message from being sent:"
            %ol
              - @message.errors.full_messages.each do |msg|
                %li
                  = msg

        %fieldset
          %input{ type: "hidden", name: "section_id", value: @page.id }
          %input{ type: "hidden", name: "message_type", value: "retailer_registration" }

          %legend
            Tell us about your company

          .field
            = f.label :retailer_number, {class: "required"}
            = f.text_field :retailer_number

          .field
            = f.label :company, "Company Name", {class: "required"}
            = f.text_field :company

          .field
            = f.label :address, "Company Address", {class: "required"}
            = f.text_field :address

          .field
            = f.label :city, {class: "required"}
            = f.text_field :city

          .field
            = f.label :province, {class: "required"}
            = f.select :province, options_for_select(provinces), prompt: "Select a Province"

          .field
            = f.label :postal_code, "Zip Code", {class: "required"}
            = f.number_field :postal_code

        %fieldset
          %legend
            Tell us about yourself

          .field
            = f.label :name, "Full Name", {class: "required"}
            = f.text_field :name

          .field
            = f.label :email, {class: "required"}
            = f.email_field :email

          .field
            = f.label :email_confirmation, {class: "required"}
            = f.email_field :email_confirmation

          .field
            = f.label :phone, {class: "required"}
            = f.number_field :phone

          .field
            = f.label :fax
            = f.number_field :fax

          
        .actions
          = f.submit 'Submit'
