%header.document
  #search
    = render "/layouts/partials/product_search", id: "product_search"
    = render "/layouts/partials/retailer_search", id: "retailer_search"
  #logo
    = link_to root_path do
      = image_tag "logo.png"

  %nav#user
    - if admin_signed_in?
      Logged in as
      %strong{style: "margin-right: 10px;"}
        = current_admin.email

      = link_to "Dashboard", admin_dashboard_path
      |
      
      = link_to 'Edit profile', edit_admin_registration_path
      |

      = link_to "Logout", destroy_admin_session_path, method: :delete
    / - else
    /   = link_to "Sign up", new_admin_registration_path
    /   |
    /   = link_to "Login", new_admin_session_path

  %nav#main
    %ul
      %li#products
        = link_to "Products", "#", :class => ( 'active' if @active == "products" )
        .subnav
          .column-group
            - Category.all.each_slice(3) do |column|
              .column
                - column.each do |category|
                  %h1 
                    = category.title
                  %ul
                    - category.components.each do |component|
                      / %li
                      /   = link_to component.title, component
                      - if component.parent_id.blank? || component.parent_id == 0 || component.patriarch.category_id != category.id
                        = render "components/component_header", element: component

      %li#collections
        = link_to "Collections", "#", :class => ( 'active' if @active == "collections" )
        .subnav
          .column-group
            - Collection.all.each_slice(10) do |column|
              .column
                %ul
                  - column.each do |collection|
                    %li
                      = link_to collection.title, collection
      %li#styles
        = link_to "Styles", "#", :class => ( 'active' if @active == "styles" )
        .subnav
          .column-group
            - Style.all.each_slice(10) do |column|
              .column
                %ul
                  - column.each do |style|
                    %li
                      = link_to style.title, style
      %li#brands
        = link_to "kathy irelandâ„¢ Home", brand_path(1), :class => ( 'active' if @active == "KIHome" )
