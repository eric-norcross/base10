- if defined?(f) && f.object.subcomponent_id
  - @subcomponents = Component.find(f.object.component_id).subcomponents
  
  = f.label :subcomponent_id
  = f.select :subcomponent_id, @subcomponents.collect{|t| [t.title, t.id]}, { prompt: "Select a Sub-Component" }

- else
  - if defined?(@subcomponents)
    - if @subcomponents.length > 0
      = label_tag "#{type.to_s}_subcomponent_id", "Sub-Component"
      = collection_select(type, :subcomponent_id, @subcomponents, :id, :title, prompt: "Select a Sub-Component" )
  
  - else 
    = label_tag "#{type.to_s}_subcomponent_id", "Sub-Component"
    = select_tag "#{type.to_s}[subcomponent_id]","#{type.to_s}_subcomponent_id", { prompt: "Please select a Component first", disabled: true }