= form_for @style do |f|
  - if @style.errors.any?
    #error-explanation
      %h1= "#{pluralize(@style.errors.count, "error")} prohibited this style from being saved:"
      %ul
        - @style.errors.full_messages.each do |msg|
          %li= msg

  %fieldset
    %legend
      Style

    .field.required
      = f.label :title
      = f.text_field :title

    .field
      = f.label :link
      = f.text_field :link

      %div.instructions.link
        (If used, "Link" will connect directly without displaying the contents of this page. Prefix "http://" to all external links. Use "/" for all internal. e.g.: "/locations")

    #style-image.singular-addable
      .addable-group.images
        = f.fields_for :images do |image_builder|
          = render 'images/image_fields', f: image_builder

      - if f.object.images.blank?
        .addable.admin-button
          = link_to_add_fields({ name: "Add Image", f: f, association: :images, container: "style-image" })

    .field
      = f.cktext_area :description

  %fieldset
    %legend.required
      Collections
      
    .field
      / = hidden_field_tag "style[collection_ids][]", nil
      / - @collections.each_slice(@collections.length / @slice_size) do |column|
      /   .column
      /     .column-group
      /       - column.each do |collection|
      /         .checkbox
      /           = check_box_tag "style[collection_ids][]", collection.id, @style.collection_ids.include?(collection.id), id:dom_id(collection)
      /           = label_tag dom_id(collection), collection.title

      - Collection.where(parent_id: 0).each_slice(@collections.length / @slice_size) do |column|
        .column
          .column-group
            - column.each do |child|
              = render "collections/collection_checkboxes", collection: child, f: f

  .actions
    = f.submit 'Save'
